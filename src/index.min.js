/*
 0BSD
*/
(function(){function f(f){function g(b,a){if(!(this instanceof g))return new g(b,a);this.i=b;this.h=a;this.f=h();this.j=this.b()}var h=f.ArrayMap;var k=f.ArraySet;g.prototype={set:function(b,a,c){var e;null==a&&(a=null);null==c&&(c=null);var d=this.j;for(e=0;null===d.a;)d=this.c(e,b,d),e++;if(this.f.has(b))return d.a["delete"](b),d.a.add(b),this.f.set(b,a),!0;if(d.a.size<this.h)return d.a.add(b),this.f.set(b,a),!0;if(d.g)return this.l(e,d),this.set(b,a,c);"function"==typeof c&&c(Array.from(d.a));
return!1},b:function(){return{a:k(),g:!0,left:null,right:null}},c:function(b,a,c){return a[~~(b/8)]&Math.pow(2,7-b%8)?c.right:c.left},l:function(b,a){var c=this;a.left=this.b();a.right=this.b();a.a.forEach(function(e){c.c(b,e,a).a.add(e)});a.a=null;this.c(b,this.i,a)===a.left?a.right.g=!1:a.left.g=!1}};Object.defineProperty(g.prototype,"constructor",{value:g});return g}"function"===typeof define&&define.amd?define(["array-map-set"],f):"object"===typeof exports?module.exports=f(require("array-map-set")):
this.k_bucket_sync=f(this.array_map_set)}).call(this);